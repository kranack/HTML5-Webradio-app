var DEBUG=0,POOL_CURRENT_RADIO=0,POOL_DATA_RADIOS=null,POOL_DATA_SERVERS=null,SERVER_URL="http://i.sa.123.fr/uploads/webradio-server/",SERVER_URL_LIB="http://i.sa.123.fr/uploads/webradio-server/lib/";$(document).ready(function(){RADIO_PLAYER.init(),$("#chooseRadio").blur(function(){POOL_CURRENT_RADIO=$(this).val();var e=POOL_DATA_RADIOS[POOL_CURRENT_RADIO].address;$("#player").attr("src",e),RADIO_PLAYER.onAir()}),LOG.init()});var CHRONOS=function(){return{init:function(){setInterval(function(){RADIO_PLAYER.onAir()},3e4)}}}(),DATAS=function(){return{getRadiosList:function(){$.ajax({dataType:"json",url:"./radios.json",success:function(e){POOL_DATA_RADIOS=e.radios,RADIO_PLAYER.displayRadios(),RADIO_PLAYER.onAir()}})},getServersList:function(){$.ajax({dataType:"json",url:"./servers.json",success:function(e){POOL_DATA_SERVERS=e.servers}})}}}(),LOG=function(){return{init:function(){null===localStorage.getItem("displayEE")?(localStorage.setItem("displayEE","true"),LOG.displayInfos()):"true"===localStorage.getItem("displayEE")&&LOG.displayInfos()},displayInfos:function(){console.info("%c	 __    __  ________  __       __  __       _______         __       __            __                                 __  __           \n	|  \\  |  \\|        \\|  \\     /  \\|  \\     |       \\       |  \\  _  |  \\          |  \\                               |  \\|  \\          \n	| $$  | $$ \\$$$$$$$$| $$\\   /  $$| $$     | $$$$$$$       | $$ / \\ | $$  ______  | $$____    ______   ______    ____| $$ \\$$  ______  	\n	| $$__| $$   | $$   | $$$\\ /  $$$| $$     | $$____        | $$/  $\\| $$ /      \\ | $$    \\  /      \\ |      \\  /      $$|  \\ /      \\ 	\n	| $$    $$   | $$   | $$$$\\  $$$$| $$     | $$    \\       | $$  $$$\\ $$|  $$$$$$\\| $$$$$$$\\|  $$$$$$\\ \\$$$$$$\\|  $$$$$$$| $$|  $$$$$$\\	\n	| $$$$$$$$   | $$   | $$\\$$ $$ $$| $$      \\$$$$$$$\\      | $$ $$\\$$\\$$| $$    $$| $$  | $$| $$   \\$$/      $$| $$  | $$| $$| $$  | $$	\n	| $$  | $$   | $$   | $$ \\$$$| $$| $$_____|  \\__| $$      | $$$$  \\$$$$| $$$$$$$$| $$__/ $$| $$     |  $$$$$$$| $$__| $$| $$| $$__/ $$	\n	| $$  | $$   | $$   | $$  \\$ | $$| $$     \\\\$$    $$      | $$$    \\$$$ \\$$     \\| $$    $$| $$      \\$$    $$ \\$$    $$| $$ \\$$    $$	\n	 \\$$   \\$$    \\$$    \\$$      \\$$ \\$$$$$$$$ \\$$$$$$        \\$$      \\$$  \\$$$$$$$ \\$$$$$$$  \\$$       \\$$$$$$$  \\$$$$$$$ \\$$  \\$$$$$$ 	\n\n\n	To disable this message type localStorage.setItem('displayEE', 'false') in javascript console \n\n	The project on github : https://www.github.com/kranack/HTML5-webradio-app/ \n	My website : http://www.damien.calesse.fr","font-size: 90%;")}}}(),RADIO_PLAYER=function(){return{init:function(){DATAS.getServersList(),DATAS.getRadiosList(),CHRONOS.init(),RADIO_PLAYER.radioPlayerContainer=$("#player"),RADIO_PLAYER.radioPlayer=RADIO_PLAYER.radioPlayerContainer[0],RADIO_PLAYER.btnPlay=$("#btn_play"),RADIO_PLAYER.btnPause=$("#btn_pause"),RADIO_PLAYER.btnStop=$("#btn_stop"),RADIO_PLAYER.btnVolLess=$("#btn_vol_less"),RADIO_PLAYER.btnVolMore=$("#btn_vol_more"),RADIO_PLAYER.btnPrev=$("#btn_prev"),RADIO_PLAYER.btnNext=$("#btn_next"),$("#controls a").click(function(){return!1}),RADIO_PLAYER.btnPlay.click(function(){return RADIO_PLAYER.radioPlayer.play(),!1}),RADIO_PLAYER.btnPause.click(function(){return RADIO_PLAYER.radioPlayer.pause(),!1}),RADIO_PLAYER.btnStop.click(function(){return RADIO_PLAYER.radioPlayer.pause(),RADIO_PLAYER.radioPlayer.currentTime=0,!1}),RADIO_PLAYER.btnVolLess.click(function(){var e=RADIO_PLAYER.radioPlayer.volume;return e-=.2,0>e&&(e=0),RADIO_PLAYER.radioPlayer.volume=e,!1}),RADIO_PLAYER.btnVolMore.click(function(){var e=RADIO_PLAYER.radioPlayer.volume;return e+=.2,e>1&&(e=1),RADIO_PLAYER.radioPlayer.volume=e,!1}),RADIO_PLAYER.radioPlayerContainer.bind("play",function(){RADIO_PLAYER.btnPlay.hide(),RADIO_PLAYER.btnPause.show()}),RADIO_PLAYER.radioPlayerContainer.bind("pause",function(){RADIO_PLAYER.btnPlay.show(),RADIO_PLAYER.btnPause.hide()})},onAir:function(){$.ajax({dataType:"json",url:SERVER_URL_LIB+"onAir.php",type:"POST",data:"server="+POOL_DATA_RADIOS[POOL_CURRENT_RADIO].id+"&address="+POOL_DATA_SERVERS[POOL_CURRENT_RADIO].address,success:function(e){switch(displayDebug(e),POOL_DATA_RADIOS[POOL_CURRENT_RADIO].id){case"chillstep":var t=e.now_playing.artist.split("-");$("#infos").html(t[1]+"-"+e.now_playing.track),$("#radio").html(t[0]);break;default:e.now_playing.emission?e.now_playing.animateur?""==e.now_playing.track?$("#infos").html("<b>"+e.now_playing.emission+"</b> avec "+e.now_playing.animateur+"<br>"+setToLowerCase(e.now_playing.artist)):$("#infos").html("<b>"+e.now_playing.emission+"</b> avec "+e.now_playing.animateur+"<br>"+setToLowerCase(e.now_playing.artist)+"-"+e.now_playing.track):""==e.now_playing.track?$("#infos").html("<b>"+e.now_playing.emission+"</b> <br>"+setToLowerCase(e.now_playing.artist)):$("#infos").html("<b>"+e.now_playing.emission+"</b> <br>"+setToLowerCase(e.now_playing.artist)+"-"+e.now_playing.track):""==e.now_playing.track?$("#infos").html(setToLowerCase(e.now_playing.artist)):$("#infos").html(setToLowerCase(e.now_playing.artist)+"-"+e.now_playing.track),$("#radio").html(POOL_DATA_RADIOS[POOL_CURRENT_RADIO].name)}e.now_playing.cover?$("#cover").html('<a href="http://www.google.com/search?q='+setToLowerCase(e.now_playing.artist)+'" target="_blank" ><img src="'+e.now_playing.cover+'" alt/></a>'):$("#cover").html("")}})},displayRadios:function(){for(var e="",t="",n=0;n<POOL_DATA_RADIOS.length;n++)e+='<option id="'+POOL_DATA_RADIOS[n].id+'" value="'+n+'" >',e+=POOL_DATA_RADIOS[n].name,e+="</option>",t+='<p id="'+POOL_DATA_RADIOS[n].id+'" value="'+n+'" >',t+=POOL_DATA_RADIOS[n].name,t+="</p>";$("#chooseRadio").html(e)}}}();