var DEBUG=0,POOL_CURRENT_RADIO=0,POOL_DATA_RADIOS=null,POOL_DATA_SERVERS=null,POOL_COMET=null,SERVER_URL="http://i.sa.123.fr/uploads/webradio-server/";$j(document).ready(function(){RADIO_PLAYER.init(),$j("#chooseRadio").blur(function(){POOL_CURRENT_RADIO=$j(this).val();var $=POOL_DATA_RADIOS[POOL_CURRENT_RADIO].address;$j("#player").attr("src",$),COMET.init()}),LOG.init()});var COMET=function(){return{init:function(){POOL_COMET=new Comet(POOL_DATA_RADIOS[POOL_CURRENT_RADIO].id,POOL_DATA_RADIOS[POOL_CURRENT_RADIO].name,POOL_DATA_SERVERS[POOL_CURRENT_RADIO].address,SERVER_URL+"onAir.php"),comet.connect()},setServer:function($){comet.setServer($)},setAddress:function($){comet.setAddress($)}}}(),DATAS=function(){return{getRadiosList:function(){$j.ajax({dataType:"json",url:"./radios.json",success:function($){POOL_DATA_RADIOS=$.radios,RADIO_PLAYER.displayRadios(),COMET.init()}})},getServersList:function(){$j.ajax({dataType:"json",url:"./servers.json",success:function($){POOL_DATA_SERVERS=$.servers}})}}}(),LOG=function(){return{init:function(){null===localStorage.getItem("displayEE")?(localStorage.setItem("displayEE","true"),LOG.displayInfos()):"true"===localStorage.getItem("displayEE")&&LOG.displayInfos()},displayInfos:function(){console.info("	 __    __  ________  __       __  __       _______         __       __            __                                 __  __           \n	|  \\  |  \\|        \\|  \\     /  \\|  \\     |       \\       |  \\  _  |  \\          |  \\                               |  \\|  \\          \n	| $$  | $$ \\$$$$$$$$| $$\\   /  $$| $$     | $$$$$$$       | $$ / \\ | $$  ______  | $$____    ______   ______    ____| $$ \\$$  ______  	\n	| $$__| $$   | $$   | $$$\\ /  $$$| $$     | $$____        | $$/  $\\| $$ /      \\ | $$    \\  /      \\ |      \\  /      $$|  \\ /      \\ 	\n	| $$    $$   | $$   | $$$$\\  $$$$| $$     | $$    \\       | $$  $$$\\ $$|  $$$$$$\\| $$$$$$$\\|  $$$$$$\\ \\$$$$$$\\|  $$$$$$$| $$|  $$$$$$\\	\n	| $$$$$$$$   | $$   | $$\\$$ $$ $$| $$      \\$$$$$$$\\      | $$ $$\\$$\\$$| $$    $$| $$  | $$| $$   \\$$/      $$| $$  | $$| $$| $$  | $$	\n	| $$  | $$   | $$   | $$ \\$$$| $$| $$_____|  \\__| $$      | $$$$  \\$$$$| $$$$$$$$| $$__/ $$| $$     |  $$$$$$$| $$__| $$| $$| $$__/ $$	\n	| $$  | $$   | $$   | $$  \\$ | $$| $$     \\\\$$    $$      | $$$    \\$$$ \\$$     \\| $$    $$| $$      \\$$    $$ \\$$    $$| $$ \\$$    $$	\n	 \\$$   \\$$    \\$$    \\$$      \\$$ \\$$$$$$$$ \\$$$$$$        \\$$      \\$$  \\$$$$$$$ \\$$$$$$$  \\$$       \\$$$$$$$  \\$$$$$$$ \\$$  \\$$$$$$ 	\n\n\n	To disable this message type localStorage.setItem('displayEE', 'false') in javascript console \n\n	The project on github : https://www.github.com/kranack/HTML5-webradio-app/ \n	My website : http://www.damien.calesse.fr")}}}(),RADIO_PLAYER=function(){return{init:function(){DATAS.getServersList(),DATAS.getRadiosList(),RADIO_PLAYER.radioPlayerContainer=$j("#player"),RADIO_PLAYER.radioPlayer=RADIO_PLAYER.radioPlayerContainer[0],RADIO_PLAYER.btnPlay=$j("#btn_play"),RADIO_PLAYER.btnPause=$j("#btn_pause"),RADIO_PLAYER.btnStop=$j("#btn_stop"),RADIO_PLAYER.btnVolLess=$j("#btn_vol_less"),RADIO_PLAYER.btnVolMore=$j("#btn_vol_more"),RADIO_PLAYER.btnPrev=$j("#btn_prev"),RADIO_PLAYER.btnNext=$j("#btn_next"),$j("#controls a").click(function(){return!1}),RADIO_PLAYER.btnPlay.click(function(){return RADIO_PLAYER.radioPlayer.play(),!1}),RADIO_PLAYER.btnPause.click(function(){return RADIO_PLAYER.radioPlayer.pause(),!1}),RADIO_PLAYER.btnStop.click(function(){return RADIO_PLAYER.radioPlayer.pause(),RADIO_PLAYER.radioPlayer.currentTime=0,!1}),RADIO_PLAYER.btnVolLess.click(function(){var $=RADIO_PLAYER.radioPlayer.volume;return $-=.2,0>$&&($=0),RADIO_PLAYER.radioPlayer.volume=$,!1}),RADIO_PLAYER.btnVolMore.click(function(){var $=RADIO_PLAYER.radioPlayer.volume;return $+=.2,$>1&&($=1),RADIO_PLAYER.radioPlayer.volume=$,!1}),RADIO_PLAYER.radioPlayerContainer.bind("play",function(){RADIO_PLAYER.btnPlay.hide(),RADIO_PLAYER.btnPause.show()}),RADIO_PLAYER.radioPlayerContainer.bind("pause",function(){RADIO_PLAYER.btnPlay.show(),RADIO_PLAYER.btnPause.hide()})},onAir:function(){switch(POOL_COMET.name){case"chillstep":var $=response.now_playing.artist.split("-");$j("#infos").html($[1]+" - "+response.now_playing.track),$j("#radio").html($[0]);break;default:response.now_playing.emission?response.now_playing.animateur?""==response.now_playing.track?$j("#infos").html("<b>"+response.now_playing.emission+"</b> avec "+response.now_playing.animateur+"<br>"+setToLowerCase(response.now_playing.artist)):$j("#infos").html("<b>"+response.now_playing.emission+"</b> avec "+response.now_playing.animateur+"<br>"+setToLowerCase(response.now_playing.artist)+" - "+response.now_playing.track):""==response.now_playing.track?$j("#infos").html("<b>"+response.now_playing.emission+"</b> <br>"+setToLowerCase(response.now_playing.artist)):$j("#infos").html("<b>"+response.now_playing.emission+"</b> <br>"+setToLowerCase(response.now_playing.artist)+" - "+response.now_playing.track):""==response.now_playing.track?$j("#infos").html(setToLowerCase(response.now_playing.artist)):$j("#infos").html(setToLowerCase(response.now_playing.artist)+" - "+response.now_playing.track),$j("#radio").html()}response.now_playing.cover?$j("#cover").html('<a href="http://www.google.com/search?q='+setToLowerCase(response.now_playing.artist)+'" target="_blank" ><img src="'+response.now_playing.cover+'" alt/></a>'):$j("#cover").html("")},displayRadios:function(){for(var $="",_=0;_<POOL_DATA_RADIOS.length;_++)$+='<option id="'+POOL_DATA_RADIOS[_].id+'" value="'+_+'" >',$+=POOL_DATA_RADIOS[_].name,$+="</option>";$j("#chooseRadio").html($)}}}();